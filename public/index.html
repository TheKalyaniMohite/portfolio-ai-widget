<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kalyani Mohite Portfolio</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>

  <style>
    /* =========================
       BASE + THEME
    ==========================*/
    :root{
      --brand1:#00e676;
      --brand2:#00b8d4;
      --navH:68px;
      --bg1:#2b2b2b;
      --bg2:#343434;
      --bg3:#3c3c3c;
      --text:#ffffff;
      --muted:rgba(255,255,255,.85);
      --panel:rgba(255,255,255,0.06);
      --panelBorder:rgba(255,255,255,0.15);
    }
    html,body{
      margin:0; padding:0; width:100%;
      color:var(--text);
      background: linear-gradient(180deg,var(--bg1) 0%, var(--bg2) 45%, var(--bg3) 100%);
      font-family: "Inter","Poppins",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      overflow-x:hidden;
      scroll-behavior:smooth;
      scroll-padding-top: calc(var(--navH) + 12px);
    }
    a{ color:inherit; text-decoration:none; }
    body{ padding-top:var(--navH); }

    /* =========================
       NAV
    ==========================*/
    .main-top-nav{
      position:fixed; top:0; left:0; right:0; height:var(--navH);
      background:#000; color:#fff; z-index:1000;
      box-shadow:0 6px 24px rgba(0,0,0,.35);
    }
    .main-top-nav .nav-flex{
      max-width:1200px; margin:0 auto; height:100%;
      display:flex; align-items:center; justify-content:space-between;
      padding:0 24px;
    }
    .brand{
      display:flex; align-items:center; gap:12px; user-select:none;
    }
    .brand img{
      width:38px; height:38px; border-radius:50%; object-fit:cover;
      border:2px solid rgba(255,255,255,.15);
    }
    .brand span{
      font-family:"Poppins",sans-serif;
      font-weight:700; letter-spacing:.2px; font-size:1.05rem;
    }
    .main-top-nav ul{
      list-style:none; display:flex; gap:18px; margin:0; padding:0;
    }
    .main-top-nav li{
      padding:8px 14px; border-radius:12px; color:var(--muted);
      transition:.2s ease;
    }
    .main-top-nav li:hover, .main-top-nav li.active{
      background:rgba(255,255,255,.08); color:#fff;
    }

    /* =========================
       SECTIONS
    ==========================*/
    .section{
      min-height:100vh; padding:96px 20px 64px;
      opacity:0; transform:translateY(16px); transition:.6s ease;
    }
    .section.visible{ opacity:1; transform:none; }
    .section-title{
      text-align:center; font-size:2.2rem; font-weight:700; margin-bottom:1.75rem;
      background: linear-gradient(45deg,var(--brand1),var(--brand2));
      -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
    }
    /* HERO */
    .hero{ display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; }
    .jumbotron{
      width:min(920px,92%); padding:3rem;
      background:rgba(0,0,0,.3); backdrop-filter: blur(8px);
      border:1px solid rgba(255,255,255,.08); border-radius:20px;
      box-shadow:0 20px 50px rgba(0,0,0,.25);
    }
    .jumbotron h1{
      margin:0 0 18px; font-size:3.2rem; font-weight:800; letter-spacing:.5px;
      background:linear-gradient(45deg,var(--brand1),var(--brand2));
      -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
      text-shadow:0 4px 20px rgba(0,0,0,.3);
    }
    .hero-intro{ color:rgba(255,255,255,.92); font-size:1.08rem; line-height:1.8; }
    .social-row{ display:flex; gap:26px; justify-content:center; margin-top:24px; }
    .social-link{
      width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;
      background:#111;border:1px solid rgba(255,255,255,.1);color:var(--brand1);
      transition:.2s;
    }
    .social-link:hover{ color:#111;background:var(--brand1);border-color:var(--brand1); }

    /* Reusable box styles (Education/Experience/Projects) */
    .box-stack{ width:min(920px,92%); margin:0 auto; display:flex; flex-direction:column; gap:20px; }
    .box{
      background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.08); border-radius:18px;
      box-shadow:0 12px 40px rgba(0,0,0,.25); overflow:hidden; cursor:pointer; transition:.2s;
    }
    .box:hover{ transform:translateY(-3px); }
    .box-h{ padding:22px 26px; font-weight:700; }
    .box-d{ max-height:0; overflow:hidden; background:rgba(255,255,255,.03); transition:max-height .45s ease,padding .45s ease; padding:0 26px; }
    .box.open .box-d{ max-height:550px; padding:16px 26px 24px; }

    /* Skills simple grid */
    .skills-grid{
      width:min(1100px,92%); margin:0 auto; display:grid;
      grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:16px;
    }
    .skill{
      background:rgba(0,0,0,.3); border:1px solid rgba(255,255,255,.08); border-radius:14px;
      padding:16px; display:flex; align-items:center; gap:12px;
    }
    .skill i{ color:var(--brand1); font-size:1.4rem; }

    /* =========================
       AI WIDGET (ChatGPT-like)
    ==========================*/
    .km-ai-fab{
      position:fixed; right:24px; bottom:22px; z-index:1200;
      width:58px;height:58px;border-radius:50%;border:none;cursor:pointer;
      background:linear-gradient(45deg,var(--brand1),var(--brand2)); color:#111;
      display:flex;align-items:center;justify-content:center; font-size:22px;
      box-shadow:0 18px 50px rgba(0,0,0,.35); transition:.2s;
    }
    .km-ai-fab:hover{ transform:translateY(-2px) scale(1.03); }

    .km-ai{
      position:fixed; right:22px; bottom:92px; z-index:1199;
      width:390px; max-height:540px; display:flex; flex-direction:column;
      background:rgba(18,18,18,.96); border:1px solid rgba(255,255,255,.12); border-radius:16px;
      box-shadow:0 26px 80px rgba(0,0,0,.45); opacity:0; visibility:hidden; transform:translateY(12px) scale(.98);
      transition:.2s ease;
    }
    .km-ai.active{ opacity:1; visibility:visible; transform:none; }
    .km-ai-h{
      display:flex; align-items:center; justify-content:space-between; padding:12px 14px;
      background:linear-gradient(45deg,var(--brand1),var(--brand2)); color:#111; font-weight:700;
    }
    .km-ai-h .toolbar{ display:flex; gap:8px; align-items:center; }
    .km-btn{
      width:30px;height:30px;border:none;border-radius:50%;cursor:pointer;background:rgba(0,0,0,.08); color:#111;
      display:flex;align-items:center;justify-content:center;font-size:16px;
    }
    .km-ai-body{ padding:12px; display:flex; flex-direction:column; gap:10px; }
    .km-msgs{
      background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.1);
      border-radius:12px; padding:10px; height:280px; overflow:auto;
    }
    .km-msgs::-webkit-scrollbar{ width:8px; } .km-msgs::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.2); border-radius:4px; }

    .km-row{ display:flex; margin-bottom:10px; }
    .km-row.user{ justify-content:flex-end; }
    .km-bubble{
      max-width:80%; border-radius:12px; padding:10px 12px; line-height:1.45; font-size:.97rem; white-space:pre-wrap;
    }
    .km-bubble.user{ background:linear-gradient(45deg,var(--brand1),var(--brand2)); color:#111; border-bottom-right-radius:4px; }
    .km-bubble.ai{ background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); color:#fff; border-bottom-left-radius:4px; }
    .km-time{ font-size:.75rem; opacity:.65; margin-top:4px; }

    .km-type{
      position:relative; background:var(--panel); border:1px solid var(--panelBorder);
      border-radius:12px; padding:6px 8px;
    }
    .km-ta{
      width:100%; border:none; outline:none; background:transparent; color:#fff;
      font: 500 0.98rem/1.35 "Inter",sans-serif;
      resize:none; overflow:hidden; max-height:120px; min-height:22px;
    }
    .km-send{
      position:absolute; right:8px; bottom:8px; width:38px;height:38px;border-radius:50%;border:none;cursor:pointer;
      display:flex;align-items:center;justify-content:center; color:#111;
      background:linear-gradient(45deg,var(--brand1),var(--brand2));
    }

    /* Typeahead suggestions under the input */
    .km-suggest{
      position:absolute; left:8px; right:56px; bottom:48px;
      background:#101010; border:1px solid rgba(255,255,255,.12); border-radius:10px;
      padding:6px 6px; display:none; max-height:140px; overflow:auto;
    }
    .km-suggest .opt{
      padding:6px 8px; border-radius:6px; font-size:.92rem; color:#ddd; cursor:pointer;
    }
    .km-suggest .opt:hover{ background:rgba(255,255,255,.08); }

    @media (max-width:768px){
      .km-ai{ right:16px; left:16px; width:auto; }
      .km-ai-fab{ right:18px; }
    }
  </style>
</head>
<body>

  <!-- NAV -->
  <nav class="main-top-nav">
    <div class="nav-flex">
      <div class="brand">
        <img src="final_profile.jpg" alt="Kalyani Mohite profile photo">
        <span>Kalyani Mohite</span>
      </div>
      <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#education">Education</a></li>
        <li><a href="#experience">Experience</a></li>
        <li><a href="#projects">Projects</a></li>
        <li><a href="#skills">Skills</a></li>
        <li><a href="#dashboards">Dashboards</a></li>
      </ul>
    </div>
  </nav>

  <!-- HERO -->
  <section id="home" class="section hero visible">
    <div class="jumbotron">
      <h1>KALYANI MOHITE</h1>
      <div class="hero-intro">
        <p>
          I am a curious, motivated and passionate Computer Science graduate from George Mason University with a passion for making sense of data and building meaningful solutions. I have always been drawn to solving real-world problems, whether it's through analyzing patterns in data, creating dashboards that tell a story, or developing applications that improve everyday tasks.
        </p>
        <p style="margin-top:1rem;">
          I enjoy working at the intersection of logic and creativity, and I am someone who thrives when I am learning something new or collaborating with others on impactful projects. Outside of work, I find joy in thoughtful conversations, long walks, and exploring different ways to grow both professionally and personally.
        </p>
      </div>

      <div class="social-row">
        <a class="social-link" href="https://www.linkedin.com/in/kalyanimohite26/" target="_blank" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
        <a class="social-link" href="mailto:kmohite@gmu.edu" title="Email"><i class="far fa-envelope"></i></a>
        <a class="social-link" href="https://github.com/TheKalyaniMohite" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
        <a class="social-link" href="tel:7048868432" title="Phone"><i class="fas fa-phone-alt"></i></a>
      </div>
    </div>
  </section>

  <!-- EDUCATION -->
  <section id="education" class="section">
    <h2 class="section-title">Education</h2>
    <div class="box-stack">
      <div class="box" onclick="this.classList.toggle('open')">
        <div class="box-h">MASTER OF SCIENCE</div>
        <div class="box-d">
          <ul>
            <li><strong>Degree name:</strong> Master of Science</li>
            <li><strong>Major:</strong> Computer Science</li>
            <li><strong>School:</strong> George Mason University</li>
            <li><strong>Duration:</strong> 2 years</li>
            <li><strong>From:</strong> August 2023</li>
            <li><strong>To:</strong> May 2025</li>
            <li><strong>GPA:</strong> 3.9</li>
            <li><strong>Relevant Coursework:</strong> Machine Learning, Generative AI, Data Mining,
              Advanced Algorithm Analysis, and Software Development</li>
          </ul>
        </div>
      </div>

      <div class="box" onclick="this.classList.toggle('open')">
        <div class="box-h">BACHELOR OF ENGINEERING</div>
        <div class="box-d">
          <ul>
            <li><strong>Degree name:</strong> Bachelor of Engineering</li>
            <li><strong>Major:</strong> Computer Science and Engineering</li>
            <li><strong>School:</strong> University of Pune</li>
            <li><strong>Duration:</strong> 4 years</li>
            <li><strong>From:</strong> August 2018</li>
            <li><strong>To:</strong> July 2022</li>
            <li><strong>GPA:</strong> 3.5</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- EXPERIENCE -->
  <section id="experience" class="section">
    <h2 class="section-title">Experience</h2>
    <div class="box-stack">
      <div class="box" onclick="this.classList.toggle('open')">
        <div class="box-h">Data Analyst — Fortune Services (Aug 2022 – Aug 2023, Nashik, India)</div>
        <div class="box-d">
          <ul>
            <li>Led data integration projects on AWS S3, Redshift, and dbt to migrate and model 1 TB of
              marketing and CRM data, enabling end-to-end predictive analytics pipelines that improved
              campaign ROI by 20%.</li>
            <li>Developed robust Python ETL pipelines and optimized SQL scripts for multi-channel data
              aggregation, boosting throughput by 30% and automating reconciliation to reduce manual effort by 40%.</li>
            <li>Partnered with data engineers to train and validate Random Forest & Logistic Regression churn models (85%+ accuracy).</li>
          </ul>
        </div>
      </div>

      <div class="box" onclick="this.classList.toggle('open')">
        <div class="box-h">Data & Marketing Assistant — EIP, George Mason University (Apr 2024 – May 2025, Fairfax, VA)</div>
        <div class="box-d">
          <ul>
            <li>Designed SQL-based data migration/ETL (Redshift, PostgreSQL) to ingest and transform 500+ engagement records; improved accuracy by 25% and reduced end-to-end runtime by 40%.</li>
            <li>Built Power BI/Tableau dashboards (drill-downs, refresh schedules) cutting reporting time by 30%.</li>
            <li>Documented data workflows, schema designs, and insights in Confluence and GitHub supporting 200+ data-driven decisions/quarter.</li>
          </ul>
        </div>
      </div>

      <div class="box" onclick="this.classList.toggle('open')">
        <div class="box-h">Data Analyst — Cybeorg Education Technology (Jan 2023 – Jul 2023, Remote)</div>
        <div class="box-d">
          <ul>
            <li>Automated 2,000+ feedback entries with Python/Pandas for sentiment analysis and visualization, boosting retention by 12%.</li>
            <li>Ran A/B tests on recommendation algorithms, refining CTR & conversion KPIs and deploying improvements via a Flask AI app.</li>
          </ul>
        </div>
      </div>

      <div class="box" onclick="this.classList.toggle('open')">
        <div class="box-h">Data Analyst Trainee — Microsoft × GMU (Jun 2024 – Aug 2024, Remote)</div>
        <div class="box-d">
          <ul>
            <li>Azure Synapse pipelines for 500 GB/day telemetry; ~40% latency reduction for downstream reports.</li>
            <li>Power BI dashboards with custom DAX (cut ad-hoc requests by half) + R visuals for usage trends.</li>
            <li>Basic anomaly detection using Azure ML + Python; alerts reduced incident resolution time by 15%.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projects" class="section">
    <h2 class="section-title">Projects</h2>
    <div class="box-stack">
      <div class="box" onclick="this.classList.toggle('open')">
        <div class="box-h">AI-Powered Resume Analyzer & Job Matcher</div>
        <div class="box-d">
          <ul>
            <li>Flask on Google Cloud (Cloud Functions, BigQuery, Cloud Storage) + spaCy skill extraction
                + TF-IDF/cosine similarity for near real-time matching (&lt; 500 ms).</li>
            <li>Automated BigQuery ETL & REST endpoints via Cloud Functions reducing manual matching by 70%.</li>
          </ul>
        </div>
      </div>

      <div class="box" onclick="this.classList.toggle('open')">
        <div class="box-h">Predictive Maintenance Dashboard</div>
        <div class="box-d">
          <ul>
            <li>Python ETL from Cloud Storage → BigQuery; Power BI for anomaly detection & trend analysis.</li>
            <li>XGBoost with TensorFlow on SageMaker (92% precision) + AWS Lambda alerts.</li>
          </ul>
        </div>
      </div>

      <div class="box" onclick="this.classList.toggle('open')">
        <div class="box-h">Smart Door Chat</div>
        <div class="box-d">
          <ul>
            <li>Raspberry Pi 4 + YOLOv5n for on-device CV (sub-100 ms) + real-time speech–text (95% accuracy); 1st place @ GMU Hackathon.</li>
            <li>MQTT to mobile app; Firebase Functions + Firestore; ETL → BI dashboards for insights.</li>
          </ul>
        </div>
      </div>

      <div class="box" onclick="this.classList.toggle('open')">
        <div class="box-h">Market Basket Analysis</div>
        <div class="box-d">
          <ul>
            <li>Aisle/category-level MBA using Instacart to find co-occurring aisles for layout/merchandising/promo ideas.</li>
            <li>Code: <a target="_blank" href="https://github.com/TheKalyaniMohite/Market-Basket-Analysis">github.com/TheKalyaniMohite/Market-Basket-Analysis</a></li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- SKILLS -->
  <section id="skills" class="section">
    <h2 class="section-title">Skills</h2>
    <div class="skills-grid" id="skillsGrid">
      <div class="skill"><i class="fab fa-python"></i>Python</div>
      <div class="skill"><i class="fas fa-database"></i>SQL</div>
      <div class="skill"><i class="fab fa-r-project"></i>R</div>
      <div class="skill"><i class="fas fa-network-wired"></i>TensorFlow</div>
      <div class="skill"><i class="fas fa-chart-line"></i>XGBoost</div>
      <div class="skill"><i class="fas fa-microchip"></i>Edge AI</div>
      <div class="skill"><i class="fab fa-aws"></i>AWS</div>
      <div class="skill"><i class="fab fa-google"></i>Google Cloud</div>
      <div class="skill"><i class="fas fa-server"></i>Firebase</div>
      <div class="skill"><i class="fas fa-chart-pie"></i>Power BI</div>
      <div class="skill"><i class="fas fa-chart-area"></i>Tableau</div>
    </div>
  </section>

  <!-- DASHBOARDS -->
  <section id="dashboards" class="section">
    <h2 class="section-title">Dashboards</h2>
    <div class="box-stack">
      <div class="box open">
        <div class="box-h">Examples</div>
        <div class="box-d">
          <div class="skill">Add Power BI/Tableau links or screenshots here.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- AI FAB -->
  <button class="km-ai-fab" id="kmFab" title="Ask AI"><i class="fas fa-robot"></i></button>

  <!-- AI WIDGET -->
  <div class="km-ai" id="kmChat" aria-hidden="true">
    <div class="km-ai-h">
      <div>AI Assistant</div>
      <div class="toolbar">
        <button class="km-btn" id="kmClear" title="Clear chat"><i class="fas fa-broom"></i></button>
        <button class="km-btn" id="kmClose" title="Close">×</button>
      </div>
    </div>
    <div class="km-ai-body">
      <div class="km-msgs" id="kmMsgs"></div>

      <div class="km-type" id="kmType">
        <textarea id="kmTa" class="km-ta" rows="1" placeholder="Type your question… (Enter = send, Shift+Enter = new line)"></textarea>
        <div class="km-suggest" id="kmSuggest"></div>
        <button class="km-send" id="kmSend" title="Send"><i class="fas fa-paper-plane"></i></button>
      </div>
    </div>
  </div>

  <script>
    /* ===== Reveal on scroll ===== */
    const io = new IntersectionObserver(es => es.forEach(e => { if(e.isIntersecting) e.target.classList.add('visible'); }),
      {threshold:.2});
    document.querySelectorAll('.section').forEach(s => io.observe(s));

    /* ====== AI Chat ====== */
    (function(){
      const fab   = document.getElementById('kmFab');
      const chat  = document.getElementById('kmChat');
      const close = document.getElementById('kmClose');
      const clear = document.getElementById('kmClear');
      const msgs  = document.getElementById('kmMsgs');
      const ta    = document.getElementById('kmTa');
      const send  = document.getElementById('kmSend');
      const suggestBox = document.getElementById('kmSuggest');

      // Chat history in-memory (kept until page refresh)
      let history = []; // {role:'user'|'assistant', content:'...', ts:Date}

      // Seed suggestions (type-ahead)
      const suggestions = [
        "Summarize Kalyani’s profile in 2 lines for a recruiter",
        "What is Kalyani’s education?",
        "What are Kalyani’s top skills in SQL and Power BI?",
        "Which project should Kalyani highlight for a Data Analyst role?",
        "Write a strong LinkedIn headline for Kalyani as a Data Analyst",
        "Describe Kalyani’s recent experience in one short paragraph"
      ];

      const formatTime = d => {
        const h = String(d.getHours()).padStart(2,'0');
        const m = String(d.getMinutes()).padStart(2,'0');
        return `${h}:${m}`;
      };

      function render(){
        msgs.innerHTML = '';
        history.forEach(m => {
          const row = document.createElement('div');
          row.className = 'km-row ' + (m.role === 'user' ? 'user': 'ai');
          const bubble = document.createElement('div');
          bubble.className = 'km-bubble ' + (m.role === 'user' ? 'user': 'ai');
          bubble.textContent = m.content;
          const time = document.createElement('div');
          time.className = 'km-time';
          time.textContent = formatTime(new Date(m.ts));
          row.appendChild(bubble);
          row.appendChild(time);
          msgs.appendChild(row);
        });
        msgs.scrollTop = msgs.scrollHeight;
      }

      function add(role, content){
        history.push({ role, content, ts: Date.now() });
        if (history.length > 18) history = history.slice(history.length - 18);
        render();
      }

      function autoGrow(){
        ta.style.height = '22px';
        ta.style.height = Math.min(120, ta.scrollHeight) + 'px';
      }

      // Build page context (grab text from key sections)
      function buildContext(){
        const getText = sel => (document.querySelector(sel)?.innerText || '').replace(/\s+/g,' ').trim();
        const parts = [
          'PROFILE SUMMARY:', getText('#home'),
          'EDUCATION:',       getText('#education'),
          'EXPERIENCE:',      getText('#experience'),
          'PROJECTS:',        getText('#projects'),
          'SKILLS:',          getText('#skills')
        ].join('\n\n');
        return parts.slice(0, 9000); // safety limit
      }

      async function ask(){
        const q = ta.value.trim();
        if(!q) return;
        add('user', q);
        ta.value = ''; autoGrow(); suggestBox.style.display = 'none';

        try{
          const res = await fetch('/api/ask', {
            method:'POST', headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ messages: history.map(({role,content})=>({role,content})), context: buildContext() })
          });
          const data = await res.json();
          add('assistant', data.answer || '(No answer)');
        }catch(err){
          add('assistant', 'Error: ' + err.message);
        }
      }

      /* UI wiring */
      fab.addEventListener('click', ()=>{ chat.classList.add('active'); chat.setAttribute('aria-hidden','false'); ta.focus(); });
      close.addEventListener('click', ()=>{ chat.classList.remove('active'); chat.setAttribute('aria-hidden','true'); });
      clear.addEventListener('click', ()=>{ history = []; render(); ta.focus(); });

      ta.addEventListener('input', autoGrow);
      ta.addEventListener('keydown', e=>{
        if(e.key === 'Enter' && !e.shiftKey){ e.preventDefault(); ask(); }
      });
      send.addEventListener('click', ask);

      // Type-ahead suggestions under the input
      function refreshSuggestions(){
        const t = ta.value.toLowerCase().trim();
        const opts = !t ? suggestions.slice(0,4)
                        : suggestions.filter(s => s.toLowerCase().includes(t)).slice(0,6);
        if(!opts.length){ suggestBox.style.display='none'; return; }
        suggestBox.innerHTML = opts.map(s=>`<div class="opt">${s}</div>`).join('');
        suggestBox.style.display='block';
      }
      ta.addEventListener('focus', refreshSuggestions);
      ta.addEventListener('input', refreshSuggestions);
      suggestBox.addEventListener('click', e=>{
        const el = e.target.closest('.opt'); if(!el) return;
        ta.value = el.textContent; autoGrow(); ask();
      });
      document.addEventListener('click', e=>{
        if(!document.getElementById('kmType').contains(e.target)) suggestBox.style.display='none';
      });

      // initial height
      autoGrow();
    })();
  </script>
</body>
</html>
